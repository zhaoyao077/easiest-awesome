{
  "url": "https://api.github.com/repos/apache/spark/issues/40337",
  "repository_url": "https://api.github.com/repos/apache/spark",
  "labels_url": "https://api.github.com/repos/apache/spark/issues/40337/labels{/name}",
  "comments_url": "https://api.github.com/repos/apache/spark/issues/40337/comments",
  "events_url": "https://api.github.com/repos/apache/spark/issues/40337/events",
  "html_url": "https://github.com/apache/spark/pull/40337",
  "id": 1615208392,
  "node_id": "PR_kwDOAQXtWs5LkWVd",
  "number": 40337,
  "title": "[SPARK-42718][BUILD] Upgrade rocksdbjni to 7.10.2",
  "user": {
    "login": "LuciferYang",
    "id": 1475305,
    "node_id": "MDQ6VXNlcjE0NzUzMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1475305?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LuciferYang",
    "html_url": "https://github.com/LuciferYang",
    "followers_url": "https://api.github.com/users/LuciferYang/followers",
    "following_url": "https://api.github.com/users/LuciferYang/following{/other_user}",
    "gists_url": "https://api.github.com/users/LuciferYang/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LuciferYang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LuciferYang/subscriptions",
    "organizations_url": "https://api.github.com/users/LuciferYang/orgs",
    "repos_url": "https://api.github.com/users/LuciferYang/repos",
    "events_url": "https://api.github.com/users/LuciferYang/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LuciferYang/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1406627200,
      "node_id": "MDU6TGFiZWwxNDA2NjI3MjAw",
      "url": "https://api.github.com/repos/apache/spark/labels/BUILD",
      "name": "BUILD",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-03-08T12:44:27Z",
  "updated_at": "2023-03-10T21:02:33Z",
  "closed_at": "2023-03-10T21:02:33Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/apache/spark/pulls/40337",
    "html_url": "https://github.com/apache/spark/pull/40337",
    "diff_url": "https://github.com/apache/spark/pull/40337.diff",
    "patch_url": "https://github.com/apache/spark/pull/40337.patch",
    "merged_at": null
  },
  "body": "### What changes were proposed in this pull request?\r\nThis pr aims to upgrade rocksdbjni from 7.9.2 to 7.10.2.\r\n\r\n\r\n### Why are the changes needed?\r\nThis version bring the performance related DB reads:\r\n\r\n- https://github.com/facebook/rocksdb/pull/10975\r\n\r\nThe full release notes as follows:\r\n\r\n- https://github.com/facebook/rocksdb/releases/tag/v7.10.2\r\n\r\n \r\n\r\n\r\n### Does this PR introduce _any_ user-facing change?\r\nNo\r\n\r\n\r\n### How was this patch tested?\r\n\r\n- Pass GitHub Actions\r\n- Manual test `RocksDBBenchmark`:\r\n\r\n**7.9.2**\r\n\r\n```\r\n[INFO] Running org.apache.spark.util.kvstore.RocksDBBenchmark\r\n                                                count   mean    min     max     95th\r\ndbClose                                         4       0.406   0.288   0.706   0.706\r\ndbCreation                                      4       68.701  4.019   262.992 262.992\r\nnaturalIndexCreateIterator                      1024    0.005   0.002   1.473   0.007\r\nnaturalIndexDescendingCreateIterator            1024    0.006   0.005   0.061   0.007\r\nnaturalIndexDescendingIteration                 1024    0.007   0.004   0.278   0.011\r\nnaturalIndexIteration                           1024    0.007   0.004   0.071   0.012\r\nrandomDeleteIndexed                             1024    0.042   0.031   0.415   0.060\r\nrandomDeletesNoIndex                            1024    0.015   0.013   0.044   0.018\r\nrandomUpdatesIndexed                            1024    0.085   0.032   30.240  0.094\r\nrandomUpdatesNoIndex                            1024    0.054   0.050   0.740   0.059\r\nrandomWritesIndexed                             1024    0.127   0.034   54.828  0.125\r\nrandomWritesNoIndex                             1024    0.063   0.053   1.895   0.087\r\nrefIndexCreateIterator                          1024    0.004   0.003   0.022   0.005\r\nrefIndexDescendingCreateIterator                1024    0.003   0.003   0.026   0.004\r\nrefIndexDescendingIteration                     1024    0.006   0.005   0.044   0.008\r\nrefIndexIteration                               1024    0.010   0.005   0.051   0.015\r\nsequentialDeleteIndexed                         1024    0.022   0.017   0.119   0.032\r\nsequentialDeleteNoIndex                         1024    0.015   0.012   0.046   0.018\r\nsequentialUpdatesIndexed                        1024    0.069   0.055   2.321   0.098\r\nsequentialUpdatesNoIndex                        1024    0.067   0.046   0.927   0.088\r\nsequentialWritesIndexed                         1024    0.085   0.055   2.308   0.113\r\nsequentialWritesNoIndex                         1024    0.055   0.046   2.872   0.060\r\n```\r\n\r\n**7.10.2**\r\n\r\n```\r\n[INFO] Running org.apache.spark.util.kvstore.RocksDBBenchmark\r\n                                                count   mean    min     max     95th\r\ndbClose                                         4       0.348   0.287   0.521   0.521\r\ndbCreation                                      4       69.416  3.810   267.620 267.620\r\nnaturalIndexCreateIterator                      1024    0.005   0.002   1.389   0.007\r\nnaturalIndexDescendingCreateIterator            1024    0.005   0.005   0.057   0.007\r\nnaturalIndexDescendingIteration                 1024    0.006   0.004   0.260   0.009\r\nnaturalIndexIteration                           1024    0.006   0.004   0.053   0.011\r\nrandomDeleteIndexed                             1024    0.028   0.019   0.306   0.046\r\nrandomDeletesNoIndex                            1024    0.015   0.012   0.045   0.018\r\nrandomUpdatesIndexed                            1024    0.086   0.032   29.664  0.109\r\nrandomUpdatesNoIndex                            1024    0.033   0.029   0.817   0.036\r\nrandomWritesIndexed                             1024    0.120   0.033   52.703  0.137\r\nrandomWritesNoIndex                             1024    0.039   0.033   1.734   0.044\r\nrefIndexCreateIterator                          1024    0.004   0.004   0.017   0.006\r\nrefIndexDescendingCreateIterator                1024    0.003   0.002   0.027   0.004\r\nrefIndexDescendingIteration                     1024    0.006   0.005   0.043   0.008\r\nrefIndexIteration                               1024    0.007   0.005   0.056   0.010\r\nsequentialDeleteIndexed                         1024    0.022   0.017   1.388   0.024\r\nsequentialDeleteNoIndex                         1024    0.015   0.012   0.037   0.018\r\nsequentialUpdatesIndexed                        1024    0.041   0.035   0.852   0.050\r\nsequentialUpdatesNoIndex                        1024    0.038   0.030   0.682   0.050\r\nsequentialWritesIndexed                         1024    0.048   0.038   2.031   0.062\r\nsequentialWritesNoIndex                         1024    0.035   0.030   2.617   0.039\r\n```",
  "closed_by": {
    "login": "dongjoon-hyun",
    "id": 9700541,
    "node_id": "MDQ6VXNlcjk3MDA1NDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9700541?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dongjoon-hyun",
    "html_url": "https://github.com/dongjoon-hyun",
    "followers_url": "https://api.github.com/users/dongjoon-hyun/followers",
    "following_url": "https://api.github.com/users/dongjoon-hyun/following{/other_user}",
    "gists_url": "https://api.github.com/users/dongjoon-hyun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dongjoon-hyun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dongjoon-hyun/subscriptions",
    "organizations_url": "https://api.github.com/users/dongjoon-hyun/orgs",
    "repos_url": "https://api.github.com/users/dongjoon-hyun/repos",
    "events_url": "https://api.github.com/users/dongjoon-hyun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dongjoon-hyun/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/apache/spark/issues/40337/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/apache/spark/issues/40337/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
