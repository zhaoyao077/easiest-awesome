{
  "url": "https://api.github.com/repos/apache/spark/issues/40753",
  "repository_url": "https://api.github.com/repos/apache/spark",
  "labels_url": "https://api.github.com/repos/apache/spark/issues/40753/labels{/name}",
  "comments_url": "https://api.github.com/repos/apache/spark/issues/40753/comments",
  "events_url": "https://api.github.com/repos/apache/spark/issues/40753/events",
  "html_url": "https://github.com/apache/spark/pull/40753",
  "id": 1664013281,
  "node_id": "PR_kwDOAQXtWs5OGvij",
  "number": 40753,
  "title": "[SPARK-43104][BUILD] Set `shadeTestJar` of `protobuf` module to `false`",
  "user": {
    "login": "LuciferYang",
    "id": 1475305,
    "node_id": "MDQ6VXNlcjE0NzUzMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1475305?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LuciferYang",
    "html_url": "https://github.com/LuciferYang",
    "followers_url": "https://api.github.com/users/LuciferYang/followers",
    "following_url": "https://api.github.com/users/LuciferYang/following{/other_user}",
    "gists_url": "https://api.github.com/users/LuciferYang/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LuciferYang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LuciferYang/subscriptions",
    "organizations_url": "https://api.github.com/users/LuciferYang/orgs",
    "repos_url": "https://api.github.com/users/LuciferYang/repos",
    "events_url": "https://api.github.com/users/LuciferYang/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LuciferYang/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1406627200,
      "node_id": "MDU6TGFiZWwxNDA2NjI3MjAw",
      "url": "https://api.github.com/repos/apache/spark/labels/BUILD",
      "name": "BUILD",
      "color": "ededed",
      "default": false,
      "description": null
    },
    {
      "id": 4654282764,
      "node_id": "LA_kwDOAQXtWs8AAAABFWq4DA",
      "url": "https://api.github.com/repos/apache/spark/labels/PROTOBUF",
      "name": "PROTOBUF",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-04-12T07:35:07Z",
  "updated_at": "2023-04-14T16:16:12Z",
  "closed_at": "2023-04-14T15:41:45Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/apache/spark/pulls/40753",
    "html_url": "https://github.com/apache/spark/pull/40753",
    "diff_url": "https://github.com/apache/spark/pull/40753.diff",
    "patch_url": "https://github.com/apache/spark/pull/40753.patch",
    "merged_at": null
  },
  "body": "### What changes were proposed in this pull request?\r\nThis pr aims to set `shadeTestJar` of `protobuf` module to `false` to skip shade `spark-protobuf_**-tests.jar` process.\r\n \r\n\r\n### Why are the changes needed?\r\n\r\nWhen `shadeTestJar` is true,  `maven-shade-plugin` always try to find(sometime is downloading) some non-existent jars:\r\n\r\n```\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/hadoop/hadoop-client-api/3.3.5/hadoop-client-api-3.3.5-tests.jar\r\n[WARNING] Could not get tests for org.apache.hadoop:hadoop-client-api:jar:3.3.5:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/tukaani/xz/1.9/xz-1.9-tests.jar\r\n[WARNING] Could not get tests for org.tukaani:xz:jar:1.9:compile\r\nDownloading from gcs-maven-central-mirror: https://maven-central.storage-download.googleapis.com/maven2/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7-tests.jar\r\nDownloaded from gcs-maven-central-mirror: https://maven-central.storage-download.googleapis.com/maven2/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7-tests.jar (0 B at 0 B/s)\r\n[WARNING] Could not get tests for com.google.protobuf:protobuf-java:jar:3.22.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/curator/curator-framework/2.13.0/curator-framework-2.13.0-tests.jar\r\n[WARNING] Could not get tests for org.apache.curator:curator-framework:jar:2.13.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/logging/log4j/log4j-slf4j2-impl/2.20.0/log4j-slf4j2-impl-2.20.0-tests.jar\r\n[WARNING] Could not get tests for org.apache.logging.log4j:log4j-slf4j2-impl:jar:2.20.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/jetbrains/annotations/17.0.0/annotations-17.0.0-tests.jar\r\n[WARNING] Could not get tests for org.jetbrains:annotations:jar:17.0.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/logging/log4j/log4j-1.2-api/2.20.0/log4j-1.2-api-2.20.0-tests.jar\r\n[WARNING] Could not get tests for org.apache.logging.log4j:log4j-1.2-api:jar:2.20.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/threeten/threeten-extra/1.7.1/threeten-extra-1.7.1-tests.jar\r\n[WARNING] Could not get tests for org.threeten:threeten-extra:jar:1.7.1:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/yetus/audience-annotations/0.13.0/audience-annotations-0.13.0-tests.jar\r\n[WARNING] Could not get tests for org.apache.yetus:audience-annotations:jar:0.13.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.14.2/jackson-databind-2.14.2-tests.jar\r\n[WARNING] Could not get tests for com.fasterxml.jackson.core:jackson-databind:jar:2.14.2:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/com/google/code/findbugs/jsr305/3.0.0/jsr305-3.0.0-tests.jar\r\n[WARNING] Could not get tests for com.google.code.findbugs:jsr305:jar:3.0.0:runtime\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/xerial/snappy/snappy-java/1.1.9.1/snappy-java-1.1.9.1-tests.jar\r\n[WARNING] Could not get tests for org.xerial.snappy:snappy-java:jar:1.1.9.1:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/javax/activation/activation/1.1.1/activation-1.1.1-tests.jar\r\n[WARNING] Could not get tests for javax.activation:activation:jar:1.1.1:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/hive/hive-storage-api/2.8.1/hive-storage-api-2.8.1-tests.jar\r\n[WARNING] Could not get tests for org.apache.hive:hive-storage-api:jar:2.8.1:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/spark-project/spark/unused/1.0.0/unused-1.0.0-tests.jar\r\n[WARNING] Could not get tests for org.spark-project.spark:unused:jar:1.0.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/scala-lang/scala-library/2.12.17/scala-library-2.12.17-tests.jar\r\n[WARNING] Could not get tests for org.scala-lang:scala-library:jar:2.12.17:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/com/github/luben/zstd-jni/1.5.4-2/zstd-jni-1.5.4-2-tests.jar\r\n[WARNING] Could not get tests for com.github.luben:zstd-jni:jar:1.5.4-2:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/logging/log4j/log4j-core/2.20.0/log4j-core-2.20.0-tests.jar\r\n[WARNING] Could not get tests for org.apache.logging.log4j:log4j-core:jar:2.20.0:runtime\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/curator/curator-recipes/2.13.0/curator-recipes-2.13.0-tests.jar\r\n[WARNING] Could not get tests for org.apache.curator:curator-recipes:jar:2.13.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/core/jackson-annotations/2.14.2/jackson-annotations-2.14.2-tests.jar\r\n[WARNING] Could not get tests for com.fasterxml.jackson.core:jackson-annotations:jar:2.14.2:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/hadoop/hadoop-client-runtime/3.3.5/hadoop-client-runtime-3.3.5-tests.jar\r\n[WARNING] Could not get tests for org.apache.hadoop:hadoop-client-runtime:jar:3.3.5:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/com/fasterxml/jackson/core/jackson-core/2.14.2/jackson-core-2.14.2-tests.jar\r\n[WARNING] Could not get tests for com.fasterxml.jackson.core:jackson-core:jar:2.14.2:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/logging/log4j/log4j-api/2.20.0/log4j-api-2.20.0-tests.jar\r\n[WARNING] Could not get tests for org.apache.logging.log4j:log4j-api:jar:2.20.0:compile\r\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/curator/curator-client/2.13.0/curator-client-2.13.0-tests.jar\r\n[WARNING] Could not get tests for org.apache.curator:curator-client:jar:2.13.0:compile\r\n```\r\n\r\nBut the shaded `spark-protobuf_**-tests.jar` was not used now and sbt assembly didn't do this.\r\n\r\n\r\n### Does this PR introduce _any_ user-facing change?\r\nNo\r\n\r\n\r\n### How was this patch tested?\r\n- Pass GitHub Actions\r\n- Check ` build/mvn clean install -pl connector/protobuf` and all test passed\r\n",
  "closed_by": {
    "login": "sunchao",
    "id": 506679,
    "node_id": "MDQ6VXNlcjUwNjY3OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/506679?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sunchao",
    "html_url": "https://github.com/sunchao",
    "followers_url": "https://api.github.com/users/sunchao/followers",
    "following_url": "https://api.github.com/users/sunchao/following{/other_user}",
    "gists_url": "https://api.github.com/users/sunchao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sunchao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sunchao/subscriptions",
    "organizations_url": "https://api.github.com/users/sunchao/orgs",
    "repos_url": "https://api.github.com/users/sunchao/repos",
    "events_url": "https://api.github.com/users/sunchao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sunchao/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/apache/spark/issues/40753/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/apache/spark/issues/40753/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
