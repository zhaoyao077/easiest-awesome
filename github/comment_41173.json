[
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1548830799",
    "html_url": "https://github.com/apache/spark/pull/41173#issuecomment-1548830799",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/41173",
    "id": 1548830799,
    "node_id": "IC_kwDOAQXtWs5cUUhP",
    "user": {
      "login": "manuzhang",
      "id": 1191767,
      "node_id": "MDQ6VXNlcjExOTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1191767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/manuzhang",
      "html_url": "https://github.com/manuzhang",
      "followers_url": "https://api.github.com/users/manuzhang/followers",
      "following_url": "https://api.github.com/users/manuzhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/manuzhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/manuzhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/manuzhang/subscriptions",
      "organizations_url": "https://api.github.com/users/manuzhang/orgs",
      "repos_url": "https://api.github.com/users/manuzhang/repos",
      "events_url": "https://api.github.com/users/manuzhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/manuzhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-16T01:21:28Z",
    "updated_at": "2023-05-16T01:21:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @tgravescs @jerryshao Please help review.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1548830799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1548929007",
    "html_url": "https://github.com/apache/spark/pull/41173#issuecomment-1548929007",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/41173",
    "id": 1548929007,
    "node_id": "IC_kwDOAQXtWs5cUsfv",
    "user": {
      "login": "manuzhang",
      "id": 1191767,
      "node_id": "MDQ6VXNlcjExOTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1191767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/manuzhang",
      "html_url": "https://github.com/manuzhang",
      "followers_url": "https://api.github.com/users/manuzhang/followers",
      "following_url": "https://api.github.com/users/manuzhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/manuzhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/manuzhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/manuzhang/subscriptions",
      "organizations_url": "https://api.github.com/users/manuzhang/orgs",
      "repos_url": "https://api.github.com/users/manuzhang/repos",
      "events_url": "https://api.github.com/users/manuzhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/manuzhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-16T03:38:00Z",
    "updated_at": "2023-05-16T03:38:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "retest please",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1548929007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1550575495",
    "html_url": "https://github.com/apache/spark/pull/41173#issuecomment-1550575495",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/41173",
    "id": 1550575495,
    "node_id": "IC_kwDOAQXtWs5ca-eH",
    "user": {
      "login": "mridulm",
      "id": 1591700,
      "node_id": "MDQ6VXNlcjE1OTE3MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1591700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mridulm",
      "html_url": "https://github.com/mridulm",
      "followers_url": "https://api.github.com/users/mridulm/followers",
      "following_url": "https://api.github.com/users/mridulm/following{/other_user}",
      "gists_url": "https://api.github.com/users/mridulm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mridulm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mridulm/subscriptions",
      "organizations_url": "https://api.github.com/users/mridulm/orgs",
      "repos_url": "https://api.github.com/users/mridulm/repos",
      "events_url": "https://api.github.com/users/mridulm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mridulm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-17T01:55:49Z",
    "updated_at": "2023-05-17T01:55:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "+CC @zhouyejoe ",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1550575495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1553426997",
    "html_url": "https://github.com/apache/spark/pull/41173#issuecomment-1553426997",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/41173",
    "id": 1553426997,
    "node_id": "IC_kwDOAQXtWs5cl2o1",
    "user": {
      "login": "tgravescs",
      "id": 4563792,
      "node_id": "MDQ6VXNlcjQ1NjM3OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4563792?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tgravescs",
      "html_url": "https://github.com/tgravescs",
      "followers_url": "https://api.github.com/users/tgravescs/followers",
      "following_url": "https://api.github.com/users/tgravescs/following{/other_user}",
      "gists_url": "https://api.github.com/users/tgravescs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tgravescs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tgravescs/subscriptions",
      "organizations_url": "https://api.github.com/users/tgravescs/orgs",
      "repos_url": "https://api.github.com/users/tgravescs/repos",
      "events_url": "https://api.github.com/users/tgravescs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tgravescs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-18T18:04:44Z",
    "updated_at": "2023-05-18T18:04:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Have you only seen this once?  Do you have any repro case or tried to make a test to simulate?\r\n\r\nI'm a bit unclear exactly how this happens, from taking a quick look, both those functions that add and remove are synchronized.  Am I missing how these can be called and actually run at the same time?\r\n\r\nYou are essentially implying that the completed container is called after we launched the executor but before we could add it containerIdToExecutorIdAndResourceProfileId.  I do see from your logs, all that happened with the same second.  Maybe not crucial but do you know why that container was completed so quickly?\r\n\r\nAs from my comment, I don't see you cleaning up this new datastructure, I would much rather look at either preventing this from running or perhaps having another launching state that you would check before removing.  But would like to understand above first.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1553426997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1553978308",
    "html_url": "https://github.com/apache/spark/pull/41173#issuecomment-1553978308",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/41173",
    "id": 1553978308,
    "node_id": "IC_kwDOAQXtWs5cn9PE",
    "user": {
      "login": "manuzhang",
      "id": 1191767,
      "node_id": "MDQ6VXNlcjExOTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1191767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/manuzhang",
      "html_url": "https://github.com/manuzhang",
      "followers_url": "https://api.github.com/users/manuzhang/followers",
      "following_url": "https://api.github.com/users/manuzhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/manuzhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/manuzhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/manuzhang/subscriptions",
      "organizations_url": "https://api.github.com/users/manuzhang/orgs",
      "repos_url": "https://api.github.com/users/manuzhang/repos",
      "events_url": "https://api.github.com/users/manuzhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/manuzhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-19T04:25:58Z",
    "updated_at": "2023-05-19T04:25:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tgravescs we have seen it quite often when YARN queues were full and the containers were **immediately preempted after launch**.  I've updated the PR keeping track of containers launching executors which can be cleaned up.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1553978308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1560490935",
    "html_url": "https://github.com/apache/spark/pull/41173#issuecomment-1560490935",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/41173",
    "id": 1560490935,
    "node_id": "IC_kwDOAQXtWs5dAzO3",
    "user": {
      "login": "manuzhang",
      "id": 1191767,
      "node_id": "MDQ6VXNlcjExOTE3Njc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1191767?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/manuzhang",
      "html_url": "https://github.com/manuzhang",
      "followers_url": "https://api.github.com/users/manuzhang/followers",
      "following_url": "https://api.github.com/users/manuzhang/following{/other_user}",
      "gists_url": "https://api.github.com/users/manuzhang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/manuzhang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/manuzhang/subscriptions",
      "organizations_url": "https://api.github.com/users/manuzhang/orgs",
      "repos_url": "https://api.github.com/users/manuzhang/repos",
      "events_url": "https://api.github.com/users/manuzhang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/manuzhang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-24T05:47:39Z",
    "updated_at": "2023-05-24T05:47:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tgravescs could you take another look?",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1560490935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1561159748",
    "html_url": "https://github.com/apache/spark/pull/41173#issuecomment-1561159748",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/41173",
    "id": 1561159748,
    "node_id": "IC_kwDOAQXtWs5dDWhE",
    "user": {
      "login": "tgravescs",
      "id": 4563792,
      "node_id": "MDQ6VXNlcjQ1NjM3OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4563792?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tgravescs",
      "html_url": "https://github.com/tgravescs",
      "followers_url": "https://api.github.com/users/tgravescs/followers",
      "following_url": "https://api.github.com/users/tgravescs/following{/other_user}",
      "gists_url": "https://api.github.com/users/tgravescs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tgravescs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tgravescs/subscriptions",
      "organizations_url": "https://api.github.com/users/tgravescs/orgs",
      "repos_url": "https://api.github.com/users/tgravescs/repos",
      "events_url": "https://api.github.com/users/tgravescs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tgravescs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-24T13:30:51Z",
    "updated_at": "2023-05-24T13:30:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "+1 looks good",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1561159748/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
