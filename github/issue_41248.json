{
  "url": "https://api.github.com/repos/apache/spark/issues/41248",
  "repository_url": "https://api.github.com/repos/apache/spark",
  "labels_url": "https://api.github.com/repos/apache/spark/issues/41248/labels{/name}",
  "comments_url": "https://api.github.com/repos/apache/spark/issues/41248/comments",
  "events_url": "https://api.github.com/repos/apache/spark/issues/41248/events",
  "html_url": "https://github.com/apache/spark/pull/41248",
  "id": 1718721130,
  "node_id": "PR_kwDOAQXtWs5Q91-W",
  "number": 41248,
  "title": "[SPARK-43601][INFRA] Remove the upper bound of `matplotlib` in requirements",
  "user": {
    "login": "zhengruifeng",
    "id": 7322292,
    "node_id": "MDQ6VXNlcjczMjIyOTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7322292?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zhengruifeng",
    "html_url": "https://github.com/zhengruifeng",
    "followers_url": "https://api.github.com/users/zhengruifeng/followers",
    "following_url": "https://api.github.com/users/zhengruifeng/following{/other_user}",
    "gists_url": "https://api.github.com/users/zhengruifeng/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zhengruifeng/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zhengruifeng/subscriptions",
    "organizations_url": "https://api.github.com/users/zhengruifeng/orgs",
    "repos_url": "https://api.github.com/users/zhengruifeng/repos",
    "events_url": "https://api.github.com/users/zhengruifeng/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zhengruifeng/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1406627200,
      "node_id": "MDU6TGFiZWwxNDA2NjI3MjAw",
      "url": "https://api.github.com/repos/apache/spark/labels/BUILD",
      "name": "BUILD",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-05-22T01:21:19Z",
  "updated_at": "2023-05-22T04:58:11Z",
  "closed_at": "2023-05-22T04:57:39Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/apache/spark/pulls/41248",
    "html_url": "https://github.com/apache/spark/pull/41248",
    "diff_url": "https://github.com/apache/spark/pull/41248.diff",
    "patch_url": "https://github.com/apache/spark/pull/41248.patch",
    "merged_at": null
  },
  "body": "### What changes were proposed in this pull request?\r\nRemove the upper bound of `matplotlib` in requirements\r\n\r\n\r\n### Why are the changes needed?\r\n1, actually, `matplotlib` is not pinned in CI;\r\n2, `matplotlib<3.3.0` fails `pip install -U -r dev/requirements.txt` in some cases, e.g. in `ubuntu 18.04`\r\n```\r\n      gcc -pthread -B /home/ruifeng.zheng/miniconda3/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ruifeng.zheng/miniconda3/include -fPIC -O2 -isystem /home/ruifeng.zheng/miniconda3/include -fPIC -DFREETYPE_BUILD_TYPE=system -DPY_ARRAY_UNIQUE_SYMBOL=MPL_matplotlib_ft2font_ARRAY_API -DNPY_NO_DEPRECATED_API=NPY_1_7_API_VERSION -D__STDC_FORMAT_MACROS=1 -Iextern/agg24-svn/include -I/home/ruifeng.zheng/miniconda3/lib/python3.10/site-packages/numpy/core/include -I/home/ruifeng.zheng/miniconda3/include/python3.10 -c src/checkdep_freetype2.c -o build/temp.linux-x86_64-cpython-310/src/checkdep_freetype2.o\r\n      src/checkdep_freetype2.c:3:6: error: #error \"FreeType version 2.3 or higher is required. You may set the MPLLOCALFREETYPE environment variable to 1 to let Matplotlib download it.\"\r\n           #error \"FreeType version 2.3 or higher is required. \\\r\n            ^~~~~\r\n      src/checkdep_freetype2.c:10:10: error: #include expects \"FILENAME\" or <FILENAME>\r\n       #include FT_FREETYPE_H\r\n                ^~~~~~~~~~~~~\r\n      src/checkdep_freetype2.c:15:9: note: #pragma message: Compiling with FreeType version FREETYPE_MAJOR.FREETYPE_MINOR.FREETYPE_PATCH.\r\n       #pragma message(\"Compiling with FreeType version \" \\\r\n               ^~~~~~~\r\n      src/checkdep_freetype2.c:18:4: error: #error \"FreeType version 2.3 or higher is required. You may set the MPLLOCALFREETYPE environment variable to 1 to let Matplotlib download it.\"\r\n         #error \"FreeType version 2.3 or higher is required. \\\r\n          ^~~~~\r\n      error: command '/usr/bin/gcc' failed with exit code 1\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: legacy-install-failure\r\n\r\n× Encountered error while trying to install package.\r\n╰─> matplotlib\r\n```\r\n\r\n\r\n\r\n### Does this PR introduce _any_ user-facing change?\r\nno, dev-only\r\n\r\n\r\n### How was this patch tested?\r\nmanually test\r\n",
  "closed_by": {
    "login": "zhengruifeng",
    "id": 7322292,
    "node_id": "MDQ6VXNlcjczMjIyOTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7322292?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zhengruifeng",
    "html_url": "https://github.com/zhengruifeng",
    "followers_url": "https://api.github.com/users/zhengruifeng/followers",
    "following_url": "https://api.github.com/users/zhengruifeng/following{/other_user}",
    "gists_url": "https://api.github.com/users/zhengruifeng/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zhengruifeng/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zhengruifeng/subscriptions",
    "organizations_url": "https://api.github.com/users/zhengruifeng/orgs",
    "repos_url": "https://api.github.com/users/zhengruifeng/repos",
    "events_url": "https://api.github.com/users/zhengruifeng/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zhengruifeng/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/apache/spark/issues/41248/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/apache/spark/issues/41248/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
