{
  "url": "https://api.github.com/repos/apache/spark/issues/40458",
  "repository_url": "https://api.github.com/repos/apache/spark",
  "labels_url": "https://api.github.com/repos/apache/spark/issues/40458/labels{/name}",
  "comments_url": "https://api.github.com/repos/apache/spark/issues/40458/comments",
  "events_url": "https://api.github.com/repos/apache/spark/issues/40458/events",
  "html_url": "https://github.com/apache/spark/pull/40458",
  "id": 1627720363,
  "node_id": "PR_kwDOAQXtWs5MORHN",
  "number": 40458,
  "title": "[SPARK-42824][CONNECT][PYTHON] Provide a clear error message for unsupported JVM attributes",
  "user": {
    "login": "itholic",
    "id": 44108233,
    "node_id": "MDQ6VXNlcjQ0MTA4MjMz",
    "avatar_url": "https://avatars.githubusercontent.com/u/44108233?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/itholic",
    "html_url": "https://github.com/itholic",
    "followers_url": "https://api.github.com/users/itholic/followers",
    "following_url": "https://api.github.com/users/itholic/following{/other_user}",
    "gists_url": "https://api.github.com/users/itholic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/itholic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/itholic/subscriptions",
    "organizations_url": "https://api.github.com/users/itholic/orgs",
    "repos_url": "https://api.github.com/users/itholic/repos",
    "events_url": "https://api.github.com/users/itholic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/itholic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1405794576,
      "node_id": "MDU6TGFiZWwxNDA1Nzk0NTc2",
      "url": "https://api.github.com/repos/apache/spark/labels/SQL",
      "name": "SQL",
      "color": "ededed",
      "default": false,
      "description": null
    },
    {
      "id": 1981527456,
      "node_id": "MDU6TGFiZWwxOTgxNTI3NDU2",
      "url": "https://api.github.com/repos/apache/spark/labels/CORE",
      "name": "CORE",
      "color": "ededed",
      "default": false,
      "description": null
    },
    {
      "id": 1982260031,
      "node_id": "MDU6TGFiZWwxOTgyMjYwMDMx",
      "url": "https://api.github.com/repos/apache/spark/labels/PYTHON",
      "name": "PYTHON",
      "color": "ededed",
      "default": false,
      "description": null
    },
    {
      "id": 4556440342,
      "node_id": "LA_kwDOAQXtWs8AAAABD5XDFg",
      "url": "https://api.github.com/repos/apache/spark/labels/CONNECT",
      "name": "CONNECT",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-03-16T15:13:44Z",
  "updated_at": "2023-04-22T05:49:23Z",
  "closed_at": "2023-03-17T02:13:08Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/apache/spark/pulls/40458",
    "html_url": "https://github.com/apache/spark/pull/40458",
    "diff_url": "https://github.com/apache/spark/pull/40458.diff",
    "patch_url": "https://github.com/apache/spark/pull/40458.patch",
    "merged_at": null
  },
  "body": "### What changes were proposed in this pull request?\r\n\r\nThis pull request proposes an improvement to the error message when trying to access a JVM attribute that is not supported in Spark Connect. Specifically, it adds a more informative error message that clearly indicates which attribute is not supported due to Spark Connect's lack of dependency on the JVM.\r\n\r\n### Why are the changes needed?\r\n\r\nCurrently, when attempting to access an unsupported JVM attribute in Spark Connect, the error message is not very clear, making it difficult for users to understand the root cause of the issue. This improvement aims to provide more helpful information to users to address this problem as below:\r\n\r\n**Before**\r\n```python\r\n>>> spark._jsc\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nAttributeError: 'SparkSession' object has no attribute '_jsc'\r\n```\r\n\r\n**After**\r\n```python\r\n>>> spark._jsc\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/haejoon.lee/Desktop/git_store/spark/python/pyspark/sql/connect/session.py\", line 490, in _jsc\r\n    raise PySparkAttributeError(\r\npyspark.errors.exceptions.base.PySparkAttributeError: [JVM_ATTRIBUTE_NOT_SUPPORTED] Attribute `_jsc` is not supported in Spark Connect as it depends on the JVM. If you need to use this attribute, use the original PySpark instead of Spark Connect.\r\n```\r\n\r\n\r\n### Does this PR introduce _any_ user-facing change?\r\n\r\nThis PR does not introduce any user-facing change in terms of functionality. However, it improves the error message, which could potentially affect the user experience in a positive way.\r\n\r\n### How was this patch tested?\r\n\r\nThis patch was tested by adding new unit tests that specifically target the error message related to unsupported JVM attributes. The tests were run locally on a development environment.",
  "closed_by": {
    "login": "HyukjinKwon",
    "id": 6477701,
    "node_id": "MDQ6VXNlcjY0Nzc3MDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6477701?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/HyukjinKwon",
    "html_url": "https://github.com/HyukjinKwon",
    "followers_url": "https://api.github.com/users/HyukjinKwon/followers",
    "following_url": "https://api.github.com/users/HyukjinKwon/following{/other_user}",
    "gists_url": "https://api.github.com/users/HyukjinKwon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/HyukjinKwon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/HyukjinKwon/subscriptions",
    "organizations_url": "https://api.github.com/users/HyukjinKwon/orgs",
    "repos_url": "https://api.github.com/users/HyukjinKwon/repos",
    "events_url": "https://api.github.com/users/HyukjinKwon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/HyukjinKwon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/apache/spark/issues/40458/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/apache/spark/issues/40458/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
