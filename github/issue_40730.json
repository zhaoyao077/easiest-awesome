{
  "url": "https://api.github.com/repos/apache/spark/issues/40730",
  "repository_url": "https://api.github.com/repos/apache/spark",
  "labels_url": "https://api.github.com/repos/apache/spark/issues/40730/labels{/name}",
  "comments_url": "https://api.github.com/repos/apache/spark/issues/40730/comments",
  "events_url": "https://api.github.com/repos/apache/spark/issues/40730/events",
  "html_url": "https://github.com/apache/spark/pull/40730",
  "id": 1661533161,
  "node_id": "PR_kwDOAQXtWs5N-Wi_",
  "number": 40730,
  "title": "[SPARK-43086][CORE] Support bin pack task scheduling on executors",
  "user": {
    "login": "warrenzhu25",
    "id": 1633312,
    "node_id": "MDQ6VXNlcjE2MzMzMTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1633312?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/warrenzhu25",
    "html_url": "https://github.com/warrenzhu25",
    "followers_url": "https://api.github.com/users/warrenzhu25/followers",
    "following_url": "https://api.github.com/users/warrenzhu25/following{/other_user}",
    "gists_url": "https://api.github.com/users/warrenzhu25/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/warrenzhu25/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/warrenzhu25/subscriptions",
    "organizations_url": "https://api.github.com/users/warrenzhu25/orgs",
    "repos_url": "https://api.github.com/users/warrenzhu25/repos",
    "events_url": "https://api.github.com/users/warrenzhu25/events{/privacy}",
    "received_events_url": "https://api.github.com/users/warrenzhu25/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1981527456,
      "node_id": "MDU6TGFiZWwxOTgxNTI3NDU2",
      "url": "https://api.github.com/repos/apache/spark/labels/CORE",
      "name": "CORE",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2023-04-10T23:16:52Z",
  "updated_at": "2023-04-20T17:48:45Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/apache/spark/pulls/40730",
    "html_url": "https://github.com/apache/spark/pull/40730",
    "diff_url": "https://github.com/apache/spark/pull/40730.diff",
    "patch_url": "https://github.com/apache/spark/pull/40730.patch",
    "merged_at": null
  },
  "body": "### What changes were proposed in this pull request?\r\nSupport bin pack task scheduling on executors. This is controlled by `spark.scheduler.binPack.enabled`\r\n\r\n### Why are the changes needed?\r\nDynamic allocation only remove or decommission idle executors. The default task scheduler use round robin to do task assignment on executors. This leads to resource waste.\r\n\r\nFor example, we have 4 tasks to run, 4 executors(each has 4 cpu cores). Default task scheduler will assign 1 task per executors. With bin pack, 1 executor will be assigned 4 tasks, then dynamic allocation could remove other 3 idle executors to reduce resource waste.\r\n\r\nIn prod, we have seen 20~50 percent resource save based on executor size, the more saving with more cpu cores per executor. For the issue could be caused by bin-packed executors, it's still possible to happen when all executor cores are occupied. If it indeed happen, the better solution might be large partition num.\r\n\r\nThe purpose of change is to provide one more scheduling option, customer still can use the old way.\r\n\r\n### Does this PR introduce _any_ user-facing change?\r\nNo\r\n\r\n### How was this patch tested?\r\nAdded test in TaskSchedulerImplSuite\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/apache/spark/issues/40730/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/apache/spark/issues/40730/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
