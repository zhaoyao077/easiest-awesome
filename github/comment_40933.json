[
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1520673919",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1520673919",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1520673919,
    "node_id": "IC_kwDOAQXtWs5ao6R_",
    "user": {
      "login": "bjornjorgensen",
      "id": 47577197,
      "node_id": "MDQ6VXNlcjQ3NTc3MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47577197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjornjorgensen",
      "html_url": "https://github.com/bjornjorgensen",
      "followers_url": "https://api.github.com/users/bjornjorgensen/followers",
      "following_url": "https://api.github.com/users/bjornjorgensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjornjorgensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjornjorgensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjornjorgensen/subscriptions",
      "organizations_url": "https://api.github.com/users/bjornjorgensen/orgs",
      "repos_url": "https://api.github.com/users/bjornjorgensen/repos",
      "events_url": "https://api.github.com/users/bjornjorgensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjornjorgensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-24T19:00:55Z",
    "updated_at": "2023-04-24T19:00:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "CC @pjfanning",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1520673919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1520686760",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1520686760",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1520686760,
    "node_id": "IC_kwDOAQXtWs5ao9ao",
    "user": {
      "login": "pjfanning",
      "id": 11783444,
      "node_id": "MDQ6VXNlcjExNzgzNDQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11783444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjfanning",
      "html_url": "https://github.com/pjfanning",
      "followers_url": "https://api.github.com/users/pjfanning/followers",
      "following_url": "https://api.github.com/users/pjfanning/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjfanning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjfanning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjfanning/subscriptions",
      "organizations_url": "https://api.github.com/users/pjfanning/orgs",
      "repos_url": "https://api.github.com/users/pjfanning/repos",
      "events_url": "https://api.github.com/users/pjfanning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjfanning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-24T19:08:36Z",
    "updated_at": "2023-04-24T19:09:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "if you use jackson 2.14.2 - you can just upgrade snakeyaml to 2.x (there is a fix in jackson 2.14.2 that makes it easier to upgrade snakeyaml dependency)\r\n\r\njackson 2.15.0 has extra changes that you need to worry about - see https://issues.apache.org/jira/browse/SPARK-42854",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1520686760/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1521835725",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1521835725",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1521835725,
    "node_id": "IC_kwDOAQXtWs5atV7N",
    "user": {
      "login": "srowen",
      "id": 822522,
      "node_id": "MDQ6VXNlcjgyMjUyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/822522?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srowen",
      "html_url": "https://github.com/srowen",
      "followers_url": "https://api.github.com/users/srowen/followers",
      "following_url": "https://api.github.com/users/srowen/following{/other_user}",
      "gists_url": "https://api.github.com/users/srowen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srowen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srowen/subscriptions",
      "organizations_url": "https://api.github.com/users/srowen/orgs",
      "repos_url": "https://api.github.com/users/srowen/repos",
      "events_url": "https://api.github.com/users/srowen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srowen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T13:56:45Z",
    "updated_at": "2023-04-25T13:56:45Z",
    "author_association": "MEMBER",
    "body": "Looks good, just resolve the conflict and we can check tests again",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1521835725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1521846016",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1521846016",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1521846016,
    "node_id": "IC_kwDOAQXtWs5atYcA",
    "user": {
      "login": "pjfanning",
      "id": 11783444,
      "node_id": "MDQ6VXNlcjExNzgzNDQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11783444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjfanning",
      "html_url": "https://github.com/pjfanning",
      "followers_url": "https://api.github.com/users/pjfanning/followers",
      "following_url": "https://api.github.com/users/pjfanning/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjfanning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjfanning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjfanning/subscriptions",
      "organizations_url": "https://api.github.com/users/pjfanning/orgs",
      "repos_url": "https://api.github.com/users/pjfanning/repos",
      "events_url": "https://api.github.com/users/pjfanning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjfanning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T14:02:27Z",
    "updated_at": "2023-04-25T14:02:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "@srowen [CVE-2022-1471](https://nvd.nist.gov/vuln/detail/CVE-2022-1471) is a snakeyaml CVE and you can upgrade snakeyaml explicitly without upgrading jackson. Jackson 2.15 applies limits on the JSON inputs it parses. It is probably not a good idea to use Jackson 2.15 without supporting overrides for these limits. See [SPARK-42854](https://issues.apache.org/jira/browse/SPARK-42854).",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1521846016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1521860271",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1521860271",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1521860271,
    "node_id": "IC_kwDOAQXtWs5atb6v",
    "user": {
      "login": "srowen",
      "id": 822522,
      "node_id": "MDQ6VXNlcjgyMjUyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/822522?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srowen",
      "html_url": "https://github.com/srowen",
      "followers_url": "https://api.github.com/users/srowen/followers",
      "following_url": "https://api.github.com/users/srowen/following{/other_user}",
      "gists_url": "https://api.github.com/users/srowen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srowen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srowen/subscriptions",
      "organizations_url": "https://api.github.com/users/srowen/orgs",
      "repos_url": "https://api.github.com/users/srowen/repos",
      "events_url": "https://api.github.com/users/srowen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srowen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T14:10:16Z",
    "updated_at": "2023-04-25T14:10:16Z",
    "author_association": "MEMBER",
    "body": "Ah OK, @bjornjorgensen how about just doing snakeyaml here as an intermediate step?",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1521860271/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1521927727",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1521927727",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1521927727,
    "node_id": "IC_kwDOAQXtWs5atsYv",
    "user": {
      "login": "pjfanning",
      "id": 11783444,
      "node_id": "MDQ6VXNlcjExNzgzNDQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11783444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjfanning",
      "html_url": "https://github.com/pjfanning",
      "followers_url": "https://api.github.com/users/pjfanning/followers",
      "following_url": "https://api.github.com/users/pjfanning/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjfanning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjfanning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjfanning/subscriptions",
      "organizations_url": "https://api.github.com/users/pjfanning/orgs",
      "repos_url": "https://api.github.com/users/pjfanning/repos",
      "events_url": "https://api.github.com/users/pjfanning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjfanning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T14:50:12Z",
    "updated_at": "2023-04-25T14:50:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "Snakeyaml 1.32 introduced an approx 5mb default limit on input yaml. Spark trunk already has this change but it might be worth considering making this limit configurable using spark configs. The snakeyaml class to look for is called LoaderOptions.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1521927727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1521933550",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1521933550",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1521933550,
    "node_id": "IC_kwDOAQXtWs5attzu",
    "user": {
      "login": "LuciferYang",
      "id": 1475305,
      "node_id": "MDQ6VXNlcjE0NzUzMDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1475305?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LuciferYang",
      "html_url": "https://github.com/LuciferYang",
      "followers_url": "https://api.github.com/users/LuciferYang/followers",
      "following_url": "https://api.github.com/users/LuciferYang/following{/other_user}",
      "gists_url": "https://api.github.com/users/LuciferYang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LuciferYang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LuciferYang/subscriptions",
      "organizations_url": "https://api.github.com/users/LuciferYang/orgs",
      "repos_url": "https://api.github.com/users/LuciferYang/repos",
      "events_url": "https://api.github.com/users/LuciferYang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LuciferYang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T14:53:41Z",
    "updated_at": "2023-04-25T14:55:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "<img width=\"1060\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1475305/234313784-5f6e54f0-5e2b-4725-a1c1-8f62e7cb6d41.png\">\r\n\r\nhttps://github.com/FasterXML/jackson-core/blob/a2c0bdcfb9aae8fca555240e63e57c1d9e6f8079/src/main/java/com/fasterxml/jackson/core/StreamReadConstraints.java#L30-L51\r\n\r\nIt seems to have added 4 constraints, but `MAX_BIGINT_SCALE_MAGNITUDE ` is not configurable.\r\n\r\nMay be we should add corresponding configurable items to `org.apache.spark.sql.catalyst.json.JSONOptions` and  inject them in `JSONOptions#buildJsonFactory` by `JsonFactoryBuilder#streamReadConstraints(StreamReadConstraints)`.\r\n\r\nThis may handle most scenarios, but there are still some places in Spark that call `new ObjectMapper()`, these will using `StreamReadConstraints.defaults()`, but for them, using the default value may be OK(need to analyze it one by one). \r\n\r\nIf there is a problem with what I said, please correct me @pjfanning , thanks \r\n\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1521933550/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1521970225",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1521970225",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1521970225,
    "node_id": "IC_kwDOAQXtWs5at2wx",
    "user": {
      "login": "LuciferYang",
      "id": 1475305,
      "node_id": "MDQ6VXNlcjE0NzUzMDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1475305?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LuciferYang",
      "html_url": "https://github.com/LuciferYang",
      "followers_url": "https://api.github.com/users/LuciferYang/followers",
      "following_url": "https://api.github.com/users/LuciferYang/following{/other_user}",
      "gists_url": "https://api.github.com/users/LuciferYang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LuciferYang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LuciferYang/subscriptions",
      "organizations_url": "https://api.github.com/users/LuciferYang/orgs",
      "repos_url": "https://api.github.com/users/LuciferYang/repos",
      "events_url": "https://api.github.com/users/LuciferYang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LuciferYang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T15:14:45Z",
    "updated_at": "2023-04-25T15:14:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "And will these new constraints make JSON parsing slower?\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1521970225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1521993941",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1521993941",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1521993941,
    "node_id": "IC_kwDOAQXtWs5at8jV",
    "user": {
      "login": "pjfanning",
      "id": 11783444,
      "node_id": "MDQ6VXNlcjExNzgzNDQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11783444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjfanning",
      "html_url": "https://github.com/pjfanning",
      "followers_url": "https://api.github.com/users/pjfanning/followers",
      "following_url": "https://api.github.com/users/pjfanning/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjfanning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjfanning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjfanning/subscriptions",
      "organizations_url": "https://api.github.com/users/pjfanning/orgs",
      "repos_url": "https://api.github.com/users/pjfanning/repos",
      "events_url": "https://api.github.com/users/pjfanning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjfanning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T15:23:53Z",
    "updated_at": "2023-04-25T15:23:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@LuciferYang your analysis summarises the situation well",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1521993941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1522230735",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1522230735",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1522230735,
    "node_id": "IC_kwDOAQXtWs5au2XP",
    "user": {
      "login": "pjfanning",
      "id": 11783444,
      "node_id": "MDQ6VXNlcjExNzgzNDQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11783444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjfanning",
      "html_url": "https://github.com/pjfanning",
      "followers_url": "https://api.github.com/users/pjfanning/followers",
      "following_url": "https://api.github.com/users/pjfanning/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjfanning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjfanning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjfanning/subscriptions",
      "organizations_url": "https://api.github.com/users/pjfanning/orgs",
      "repos_url": "https://api.github.com/users/pjfanning/repos",
      "events_url": "https://api.github.com/users/pjfanning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjfanning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T18:30:19Z",
    "updated_at": "2023-04-25T18:30:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "> And will these new constraints make JSON parsing slower?\r\n\r\nthere is no evidence of a significant performance drop",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1522230735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1522239102",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1522239102",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1522239102,
    "node_id": "IC_kwDOAQXtWs5au4Z-",
    "user": {
      "login": "pjfanning",
      "id": 11783444,
      "node_id": "MDQ6VXNlcjExNzgzNDQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11783444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjfanning",
      "html_url": "https://github.com/pjfanning",
      "followers_url": "https://api.github.com/users/pjfanning/followers",
      "following_url": "https://api.github.com/users/pjfanning/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjfanning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjfanning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjfanning/subscriptions",
      "organizations_url": "https://api.github.com/users/pjfanning/orgs",
      "repos_url": "https://api.github.com/users/pjfanning/repos",
      "events_url": "https://api.github.com/users/pjfanning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjfanning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T18:37:10Z",
    "updated_at": "2023-04-25T18:37:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "@bjornjorgensen can you engage with the comments? A few of us have basically asked for this PR to be modified or redone but not to proceed as it is.\r\n\r\n* one option is to replace this PR with 1 that upgrades just snakeyaml and leaves jackson alone\r\n* another option is to upgrade jackson but to also introduce new spark configs so a StreamReadConstraints can be created and set on the ObjectMapper based on the config values",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1522239102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1522262873",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1522262873",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1522262873,
    "node_id": "IC_kwDOAQXtWs5au-NZ",
    "user": {
      "login": "bjornjorgensen",
      "id": 47577197,
      "node_id": "MDQ6VXNlcjQ3NTc3MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47577197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjornjorgensen",
      "html_url": "https://github.com/bjornjorgensen",
      "followers_url": "https://api.github.com/users/bjornjorgensen/followers",
      "following_url": "https://api.github.com/users/bjornjorgensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjornjorgensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjornjorgensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjornjorgensen/subscriptions",
      "organizations_url": "https://api.github.com/users/bjornjorgensen/orgs",
      "repos_url": "https://api.github.com/users/bjornjorgensen/repos",
      "events_url": "https://api.github.com/users/bjornjorgensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjornjorgensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T18:52:46Z",
    "updated_at": "2023-04-25T18:52:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@pjfanning yes, sorry \r\nI have marked it as a draft now.  ",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1522262873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1522751838",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1522751838",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1522751838,
    "node_id": "IC_kwDOAQXtWs5aw1le",
    "user": {
      "login": "LuciferYang",
      "id": 1475305,
      "node_id": "MDQ6VXNlcjE0NzUzMDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1475305?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LuciferYang",
      "html_url": "https://github.com/LuciferYang",
      "followers_url": "https://api.github.com/users/LuciferYang/followers",
      "following_url": "https://api.github.com/users/LuciferYang/following{/other_user}",
      "gists_url": "https://api.github.com/users/LuciferYang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LuciferYang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LuciferYang/subscriptions",
      "organizations_url": "https://api.github.com/users/LuciferYang/orgs",
      "repos_url": "https://api.github.com/users/LuciferYang/repos",
      "events_url": "https://api.github.com/users/LuciferYang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LuciferYang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-26T04:11:56Z",
    "updated_at": "2023-04-26T04:11:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Please fix the compilation error first @bjornjorgensen thanks\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1522751838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1523073847",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1523073847",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1523073847,
    "node_id": "IC_kwDOAQXtWs5ayEM3",
    "user": {
      "login": "LuciferYang",
      "id": 1475305,
      "node_id": "MDQ6VXNlcjE0NzUzMDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1475305?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LuciferYang",
      "html_url": "https://github.com/LuciferYang",
      "followers_url": "https://api.github.com/users/LuciferYang/followers",
      "following_url": "https://api.github.com/users/LuciferYang/following{/other_user}",
      "gists_url": "https://api.github.com/users/LuciferYang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LuciferYang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LuciferYang/subscriptions",
      "organizations_url": "https://api.github.com/users/LuciferYang/orgs",
      "repos_url": "https://api.github.com/users/LuciferYang/repos",
      "events_url": "https://api.github.com/users/LuciferYang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LuciferYang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-26T09:18:33Z",
    "updated_at": "2023-04-26T09:18:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "I found `Update jackson-module-scala to 2.15.0 in 2.12.x` in release plan of Scala 2.12.18:\r\n\r\nhttps://github.com/scala/scala/milestone/99",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1523073847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1523106145",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1523106145",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1523106145,
    "node_id": "IC_kwDOAQXtWs5ayMFh",
    "user": {
      "login": "pjfanning",
      "id": 11783444,
      "node_id": "MDQ6VXNlcjExNzgzNDQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11783444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjfanning",
      "html_url": "https://github.com/pjfanning",
      "followers_url": "https://api.github.com/users/pjfanning/followers",
      "following_url": "https://api.github.com/users/pjfanning/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjfanning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjfanning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjfanning/subscriptions",
      "organizations_url": "https://api.github.com/users/pjfanning/orgs",
      "repos_url": "https://api.github.com/users/pjfanning/repos",
      "events_url": "https://api.github.com/users/pjfanning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjfanning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-26T09:39:53Z",
    "updated_at": "2023-04-26T09:39:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I found `Update jackson-module-scala to 2.15.0 in 2.12.x` in release plan of Scala 2.12.18:\r\n> \r\n> https://github.com/scala/scala/milestone/99\r\n\r\n@LuciferYang Core Scala libs don't have a dependency on Jackson. This upgrade seems to affect a module called `compilerOptionsExporter`. I don't really know what that that is but I doubt whether it has much impact outside the Scala build.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1523106145/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1523205372",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1523205372",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1523205372,
    "node_id": "IC_kwDOAQXtWs5aykT8",
    "user": {
      "login": "bjornjorgensen",
      "id": 47577197,
      "node_id": "MDQ6VXNlcjQ3NTc3MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47577197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjornjorgensen",
      "html_url": "https://github.com/bjornjorgensen",
      "followers_url": "https://api.github.com/users/bjornjorgensen/followers",
      "following_url": "https://api.github.com/users/bjornjorgensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjornjorgensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjornjorgensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjornjorgensen/subscriptions",
      "organizations_url": "https://api.github.com/users/bjornjorgensen/orgs",
      "repos_url": "https://api.github.com/users/bjornjorgensen/repos",
      "events_url": "https://api.github.com/users/bjornjorgensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjornjorgensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-26T10:42:30Z",
    "updated_at": "2023-04-26T10:42:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "anyway this is my \"hello world\" in Scala. \r\nWhat is the best way to get this forward? @LuciferYang will you take over? or.. ",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1523205372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1525629901",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1525629901",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1525629901,
    "node_id": "IC_kwDOAQXtWs5a70PN",
    "user": {
      "login": "bjornjorgensen",
      "id": 47577197,
      "node_id": "MDQ6VXNlcjQ3NTc3MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47577197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjornjorgensen",
      "html_url": "https://github.com/bjornjorgensen",
      "followers_url": "https://api.github.com/users/bjornjorgensen/followers",
      "following_url": "https://api.github.com/users/bjornjorgensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjornjorgensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjornjorgensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjornjorgensen/subscriptions",
      "organizations_url": "https://api.github.com/users/bjornjorgensen/orgs",
      "repos_url": "https://api.github.com/users/bjornjorgensen/repos",
      "events_url": "https://api.github.com/users/bjornjorgensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjornjorgensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-27T12:42:19Z",
    "updated_at": "2023-04-27T12:42:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Ah OK, @bjornjorgensen how about just doing snakeyaml here as an intermediate step?\r\n\r\nWell, upgrading SnakeYAML might work as a temporary solution, but for Spark's long-term benefit, I believe it's best to upgrade Jackson now. This will make future upgrades of Jackson much easier. Additionally, Snyk has opened two PRs to upgrade `com.fasterxml.jackson.dataformat:jackson-dataformat-yaml` to version 2.15.0. By upgrading Jackson now, we'll address these issues and won't receive any further request about this.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1525629901/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1525666677",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1525666677",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1525666677,
    "node_id": "IC_kwDOAQXtWs5a79N1",
    "user": {
      "login": "bjornjorgensen",
      "id": 47577197,
      "node_id": "MDQ6VXNlcjQ3NTc3MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47577197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjornjorgensen",
      "html_url": "https://github.com/bjornjorgensen",
      "followers_url": "https://api.github.com/users/bjornjorgensen/followers",
      "following_url": "https://api.github.com/users/bjornjorgensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjornjorgensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjornjorgensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjornjorgensen/subscriptions",
      "organizations_url": "https://api.github.com/users/bjornjorgensen/orgs",
      "repos_url": "https://api.github.com/users/bjornjorgensen/repos",
      "events_url": "https://api.github.com/users/bjornjorgensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjornjorgensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-27T13:07:17Z",
    "updated_at": "2023-04-27T13:07:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "we can upgrade it to \r\n```\r\n private def safeStringToInt(value: String, default: Int): Int = {\r\n    try {\r\n      val intValue = value.toInt\r\n      if (intValue >= 0) intValue else default\r\n    } catch {\r\n      case _: NumberFormatException => default\r\n    }\r\n  }\r\n\r\n\r\n  private val maxNestingDepth: Int = parameters\r\n    .get(\"maxNestingDepth\")\r\n    .map(safeStringToInt(_, StreamReadConstraints.DEFAULT_MAX_DEPTH))\r\n    .getOrElse(StreamReadConstraints.DEFAULT_MAX_DEPTH)\r\n\r\n  private val maxNumLen: Int = parameters\r\n    .get(\"maxNumLen\")\r\n    .map(safeStringToInt(_, StreamReadConstraints.DEFAULT_MAX_NUM_LEN))\r\n    .getOrElse(StreamReadConstraints.DEFAULT_MAX_NUM_LEN)\r\n\r\n  private val maxStringLen: Int = parameters\r\n    .get(\"maxStringLen\")\r\n    .map(safeStringToInt(_, StreamReadConstraints.DEFAULT_MAX_STRING_LEN))\r\n    .getOrElse(StreamReadConstraints.DEFAULT_MAX_STRING_LEN)\r\n\r\n```\r\n\r\nOr chatGPT will have this \r\n\r\nCache frequently used values to reduce the number of map lookups. For example, in the JSONOptions class, you can create lazy vals for the frequently accessed parameters:\r\n```\r\n  lazy val samplingRatio: Double = parameters.get(SAMPLING_RATIO).map(_.toDouble).getOrElse(1.0)\r\n  lazy val primitivesAsString: Boolean = parameters.get(PRIMITIVES_AS_STRING).map(_.toBoolean).getOrElse(false)\r\n  lazy val prefersDecimal: Boolean = parameters.get(PREFERS_DECIMAL).map(_.toBoolean).getOrElse(false)\r\n ```\r\nIn the safeStringToInt method, you can use scala.util.Try to handle the conversion from String to Int:\r\n```\r\n\tprivate def safeStringToInt(value: String, default: Int): Int = {\r\n\t\tscala.util.Try(value.toInt).filter(_ >= 0).getOrElse(default)\r\n\t  }\r\n```\t  \r\nConsider using getOrElse with a default value directly instead of map followed by getOrElse for some parameters:\r\n```\r\n  private val maxNestingDepth: Int = parameters\r\n    .getOrElse(\"maxNestingDepth\", StreamReadConstraints.DEFAULT_MAX_DEPTH.toString)\r\n    .pipe(safeStringToInt(_, StreamReadConstraints.DEFAULT_MAX_DEPTH))\r\n\r\n  private val maxNumLen: Int = parameters\r\n    .getOrElse(\"maxNumLen\", StreamReadConstraints.DEFAULT_MAX_NUM_LEN.toString)\r\n    .pipe(safeStringToInt(_, StreamReadConstraints.DEFAULT_MAX_NUM_LEN))\r\n\r\n  private val maxStringLen: Int = parameters\r\n    .getOrElse(\"maxStringLen\", StreamReadConstraints.DEFAULT_MAX_STRING_LEN.toString)\r\n    .pipe(safeStringToInt(_, StreamReadConstraints.DEFAULT_MAX_STRING_LEN))\r\n```\r\nbut it seams to be to mach.. \r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1525666677/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1525686850",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1525686850",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1525686850,
    "node_id": "IC_kwDOAQXtWs5a8CJC",
    "user": {
      "login": "srowen",
      "id": 822522,
      "node_id": "MDQ6VXNlcjgyMjUyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/822522?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srowen",
      "html_url": "https://github.com/srowen",
      "followers_url": "https://api.github.com/users/srowen/followers",
      "following_url": "https://api.github.com/users/srowen/following{/other_user}",
      "gists_url": "https://api.github.com/users/srowen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srowen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srowen/subscriptions",
      "organizations_url": "https://api.github.com/users/srowen/orgs",
      "repos_url": "https://api.github.com/users/srowen/repos",
      "events_url": "https://api.github.com/users/srowen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srowen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-27T13:21:03Z",
    "updated_at": "2023-04-27T13:21:03Z",
    "author_association": "MEMBER",
    "body": "I think it's overkill to put too much processing into this arg parsing",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1525686850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1527567608",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1527567608",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1527567608,
    "node_id": "IC_kwDOAQXtWs5bDNT4",
    "user": {
      "login": "srowen",
      "id": 822522,
      "node_id": "MDQ6VXNlcjgyMjUyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/822522?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srowen",
      "html_url": "https://github.com/srowen",
      "followers_url": "https://api.github.com/users/srowen/followers",
      "following_url": "https://api.github.com/users/srowen/following{/other_user}",
      "gists_url": "https://api.github.com/users/srowen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srowen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srowen/subscriptions",
      "organizations_url": "https://api.github.com/users/srowen/orgs",
      "repos_url": "https://api.github.com/users/srowen/repos",
      "events_url": "https://api.github.com/users/srowen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srowen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-28T13:30:05Z",
    "updated_at": "2023-04-28T13:30:05Z",
    "author_association": "MEMBER",
    "body": "Merged to master",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1527567608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1527577420",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1527577420",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1527577420,
    "node_id": "IC_kwDOAQXtWs5bDPtM",
    "user": {
      "login": "bjornjorgensen",
      "id": 47577197,
      "node_id": "MDQ6VXNlcjQ3NTc3MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47577197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjornjorgensen",
      "html_url": "https://github.com/bjornjorgensen",
      "followers_url": "https://api.github.com/users/bjornjorgensen/followers",
      "following_url": "https://api.github.com/users/bjornjorgensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjornjorgensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjornjorgensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjornjorgensen/subscriptions",
      "organizations_url": "https://api.github.com/users/bjornjorgensen/orgs",
      "repos_url": "https://api.github.com/users/bjornjorgensen/repos",
      "events_url": "https://api.github.com/users/bjornjorgensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjornjorgensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-28T13:36:57Z",
    "updated_at": "2023-04-28T13:36:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you all so much for your help and support for this update.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1527577420/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1535994835",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1535994835",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1535994835,
    "node_id": "IC_kwDOAQXtWs5bjWvT",
    "user": {
      "login": "EnricoMi",
      "id": 44700269,
      "node_id": "MDQ6VXNlcjQ0NzAwMjY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44700269?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EnricoMi",
      "html_url": "https://github.com/EnricoMi",
      "followers_url": "https://api.github.com/users/EnricoMi/followers",
      "following_url": "https://api.github.com/users/EnricoMi/following{/other_user}",
      "gists_url": "https://api.github.com/users/EnricoMi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EnricoMi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EnricoMi/subscriptions",
      "organizations_url": "https://api.github.com/users/EnricoMi/orgs",
      "repos_url": "https://api.github.com/users/EnricoMi/repos",
      "events_url": "https://api.github.com/users/EnricoMi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EnricoMi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T09:38:24Z",
    "updated_at": "2023-05-05T09:58:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Note that this breaks downstream projects that want to read json:\r\n\r\n```scala\r\nspark.read.json(\"file.json\")\r\n```\r\n```\r\njava.lang.NoClassDefFoundError: com/fasterxml/jackson/core/StreamReadConstraints\r\n\tat org.apache.spark.sql.catalyst.json.JSONOptions.buildJsonFactory(JSONOptions.scala:195)\r\n\tat org.apache.spark.sql.catalyst.json.JsonInferSchema.$anonfun$infer$1(JsonInferSchema.scala:83)\r\n...\r\nCaused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.core.StreamReadConstraints\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n\t... 16 more\r\n```\r\n\r\nThe reason is that spark-core depends on avro 1.11.1, which pulls in jackson-core 2.12.7:\r\n```\r\n[INFO] +- org.apache.spark:spark-core_2.12:jar:3.5.0-SNAPSHOT:provided\r\n[INFO] |  +- org.apache.avro:avro:jar:1.11.1:provided\r\n[INFO] |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.12.7:provided\r\n```\r\n\r\nProject avro has upgraded to jackson 2.15.0 a few days ago: https://github.com/apache/avro/commit/3b6c6cc43d54ae56b51dacfd6d86d54a0733d57b\r\n\r\nI think for this upgrade in Spark to work, the avro dependency of spark-core has to be upgraded to their next release as well.\r\n\r\nMy project depends on spark-core and spark-sql only.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1535994835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1536025688",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1536025688",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1536025688,
    "node_id": "IC_kwDOAQXtWs5bjeRY",
    "user": {
      "login": "bjornjorgensen",
      "id": 47577197,
      "node_id": "MDQ6VXNlcjQ3NTc3MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47577197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjornjorgensen",
      "html_url": "https://github.com/bjornjorgensen",
      "followers_url": "https://api.github.com/users/bjornjorgensen/followers",
      "following_url": "https://api.github.com/users/bjornjorgensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjornjorgensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjornjorgensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjornjorgensen/subscriptions",
      "organizations_url": "https://api.github.com/users/bjornjorgensen/orgs",
      "repos_url": "https://api.github.com/users/bjornjorgensen/repos",
      "events_url": "https://api.github.com/users/bjornjorgensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjornjorgensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T10:04:00Z",
    "updated_at": "2023-05-05T10:04:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@EnricoMi I read and write JSON files using pyspark. I haven't seen any problems so far. \r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1536025688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1536111904",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1536111904",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1536111904,
    "node_id": "IC_kwDOAQXtWs5bjzUg",
    "user": {
      "login": "EnricoMi",
      "id": 44700269,
      "node_id": "MDQ6VXNlcjQ0NzAwMjY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44700269?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EnricoMi",
      "html_url": "https://github.com/EnricoMi",
      "followers_url": "https://api.github.com/users/EnricoMi/followers",
      "following_url": "https://api.github.com/users/EnricoMi/following{/other_user}",
      "gists_url": "https://api.github.com/users/EnricoMi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EnricoMi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EnricoMi/subscriptions",
      "organizations_url": "https://api.github.com/users/EnricoMi/orgs",
      "repos_url": "https://api.github.com/users/EnricoMi/repos",
      "events_url": "https://api.github.com/users/EnricoMi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EnricoMi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T11:20:49Z",
    "updated_at": "2023-05-05T11:24:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "I doubt `spark-submit`, `spark-shell` or `pyspark` are affected. The Spark sources are also not affected:\r\n\r\n```\r\n[INFO] org.apache.spark:spark-core_2.12:jar:3.5.0-SNAPSHOT\r\n[INFO] +- org.apache.avro:avro:jar:1.11.1:compile\r\n[INFO] |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.15.0:compile\r\n```\r\n\r\nI am talking about Java / Scala projects that depend on `spark-core`, like https://github.com/G-Research/spark-extension.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1536111904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1536402516",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1536402516",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1536402516,
    "node_id": "IC_kwDOAQXtWs5bk6RU",
    "user": {
      "login": "srowen",
      "id": 822522,
      "node_id": "MDQ6VXNlcjgyMjUyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/822522?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srowen",
      "html_url": "https://github.com/srowen",
      "followers_url": "https://api.github.com/users/srowen/followers",
      "following_url": "https://api.github.com/users/srowen/following{/other_user}",
      "gists_url": "https://api.github.com/users/srowen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srowen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srowen/subscriptions",
      "organizations_url": "https://api.github.com/users/srowen/orgs",
      "repos_url": "https://api.github.com/users/srowen/repos",
      "events_url": "https://api.github.com/users/srowen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srowen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T15:08:59Z",
    "updated_at": "2023-05-05T15:08:59Z",
    "author_association": "MEMBER",
    "body": "All wrappers would be affected if any are, as all of this goes through the JVM for JSON processing.\r\nYes, you show that Spark does _not_ pull in older Jackson versions via Avro. So aren't you talking about other projects that may somehow pull in older Jackson, not Spark? I don't quite understand. Spark JSON processing worsk with this change.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1536402516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1536432927",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1536432927",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1536432927,
    "node_id": "IC_kwDOAQXtWs5blBsf",
    "user": {
      "login": "EnricoMi",
      "id": 44700269,
      "node_id": "MDQ6VXNlcjQ0NzAwMjY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44700269?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EnricoMi",
      "html_url": "https://github.com/EnricoMi",
      "followers_url": "https://api.github.com/users/EnricoMi/followers",
      "following_url": "https://api.github.com/users/EnricoMi/following{/other_user}",
      "gists_url": "https://api.github.com/users/EnricoMi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EnricoMi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EnricoMi/subscriptions",
      "organizations_url": "https://api.github.com/users/EnricoMi/orgs",
      "repos_url": "https://api.github.com/users/EnricoMi/repos",
      "events_url": "https://api.github.com/users/EnricoMi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EnricoMi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T15:33:43Z",
    "updated_at": "2023-05-05T15:33:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Spark pulls in Jackson 2.15.0 for compile scope. Projects depending on Spark do not transitively depend on Jackson 2.15.0.\r\n\r\nSpark depends on Avro which depends on Jackson 2.12.7. Projects that depend on Spark transitively depend on Jackson 2.12.7.\r\n\r\nMaybe spark-core should depend on Jackson 2.15.0 with runtime scope, rather than compile scope.\r\n\r\nThe following pom reproduces the issue:\r\n```xml\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\r\n  <modelVersion>4.0.0</modelVersion>\r\n  <groupId>uk.co.gresearch.spark</groupId>\r\n  <artifactId>spark-example_2.13</artifactId>\r\n  <version>1.0.0-SNAPSHOT</version>\r\n\r\n  <dependencies>\r\n    <dependency>\r\n      <groupId>org.apache.spark</groupId>\r\n      <artifactId>spark-core_2.13</artifactId>\r\n      <version>3.5.0-SNAPSHOT</version>\r\n      <scope>provided</scope>\r\n    </dependency>\r\n  </dependencies>\r\n\r\n  <repositories>\r\n    <!-- required to resolve Spark snapshot versions -->\r\n    <repository>\r\n      <id>apache snapshots</id>\r\n      <name>Apache Snapshots</name>\r\n      <url>https://repository.apache.org/snapshots/</url>\r\n    </repository>\r\n  </repositories>\r\n</project>\r\n```\r\n```bash\r\nmvn dependency:tree\r\n```\r\n```\r\n[INFO] uk.co.gresearch.spark:spark-example_2.13:jar:1.0.0-SNAPSHOT\r\n[INFO] \\- org.apache.spark:spark-core_2.13:jar:3.5.0-SNAPSHOT:provided\r\n[INFO]    +- org.scala-lang.modules:scala-parallel-collections_2.13:jar:1.0.4:provided\r\n[INFO]    +- org.apache.avro:avro:jar:1.11.1:provided\r\n[INFO]    |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.12.7:provided\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1536432927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1536441189",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1536441189",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1536441189,
    "node_id": "IC_kwDOAQXtWs5blDtl",
    "user": {
      "login": "srowen",
      "id": 822522,
      "node_id": "MDQ6VXNlcjgyMjUyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/822522?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/srowen",
      "html_url": "https://github.com/srowen",
      "followers_url": "https://api.github.com/users/srowen/followers",
      "following_url": "https://api.github.com/users/srowen/following{/other_user}",
      "gists_url": "https://api.github.com/users/srowen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/srowen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/srowen/subscriptions",
      "organizations_url": "https://api.github.com/users/srowen/orgs",
      "repos_url": "https://api.github.com/users/srowen/repos",
      "events_url": "https://api.github.com/users/srowen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/srowen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T15:40:34Z",
    "updated_at": "2023-05-05T15:40:34Z",
    "author_association": "MEMBER",
    "body": "They do transitively depend on Jackson, if it's compile scope. Lots of stuff would never work otherwise.\r\nruntime scope does not work; we could not compile against Jackson code then, and Spark uses Jackson classes.\r\n\r\nYou are correct that there is a conflict that Maven resolves, and its rules may not give the desired effect. However Spark does \"all it can do\" by directly depending on Jackson. \r\n\r\nThe only thing I can think of is to also exclude the jackson dep from Avro explicitly in the Spark POM?",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1536441189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1536561751",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1536561751",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1536561751,
    "node_id": "IC_kwDOAQXtWs5blhJX",
    "user": {
      "login": "bjornjorgensen",
      "id": 47577197,
      "node_id": "MDQ6VXNlcjQ3NTc3MTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47577197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bjornjorgensen",
      "html_url": "https://github.com/bjornjorgensen",
      "followers_url": "https://api.github.com/users/bjornjorgensen/followers",
      "following_url": "https://api.github.com/users/bjornjorgensen/following{/other_user}",
      "gists_url": "https://api.github.com/users/bjornjorgensen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bjornjorgensen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bjornjorgensen/subscriptions",
      "organizations_url": "https://api.github.com/users/bjornjorgensen/orgs",
      "repos_url": "https://api.github.com/users/bjornjorgensen/repos",
      "events_url": "https://api.github.com/users/bjornjorgensen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bjornjorgensen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T17:25:26Z",
    "updated_at": "2023-05-05T17:25:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "> The only thing I can think of is to also exclude the jackson dep from Avro explicitly in the Spark POM?\r\n\r\nBut then we will have to write a lot of testes to test Avro with  jackson version 2.15.0. \r\n\r\nCant we open a issue in Avro and ask for a new version? There lasts release is from Aug 5, 2022.   ",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1536561751/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1536566763",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1536566763",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1536566763,
    "node_id": "IC_kwDOAQXtWs5bliXr",
    "user": {
      "login": "EnricoMi",
      "id": 44700269,
      "node_id": "MDQ6VXNlcjQ0NzAwMjY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44700269?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/EnricoMi",
      "html_url": "https://github.com/EnricoMi",
      "followers_url": "https://api.github.com/users/EnricoMi/followers",
      "following_url": "https://api.github.com/users/EnricoMi/following{/other_user}",
      "gists_url": "https://api.github.com/users/EnricoMi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/EnricoMi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/EnricoMi/subscriptions",
      "organizations_url": "https://api.github.com/users/EnricoMi/orgs",
      "repos_url": "https://api.github.com/users/EnricoMi/repos",
      "events_url": "https://api.github.com/users/EnricoMi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/EnricoMi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T17:30:55Z",
    "updated_at": "2023-05-05T17:30:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "That was my initial suggested solution. Once Avro releases a new version, and Spark is compatible with that, the problem should be resolved by upgrading to that new Avro version.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1536566763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/apache/spark/issues/comments/1536568838",
    "html_url": "https://github.com/apache/spark/pull/40933#issuecomment-1536568838",
    "issue_url": "https://api.github.com/repos/apache/spark/issues/40933",
    "id": 1536568838,
    "node_id": "IC_kwDOAQXtWs5bli4G",
    "user": {
      "login": "pjfanning",
      "id": 11783444,
      "node_id": "MDQ6VXNlcjExNzgzNDQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11783444?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pjfanning",
      "html_url": "https://github.com/pjfanning",
      "followers_url": "https://api.github.com/users/pjfanning/followers",
      "following_url": "https://api.github.com/users/pjfanning/following{/other_user}",
      "gists_url": "https://api.github.com/users/pjfanning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pjfanning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pjfanning/subscriptions",
      "organizations_url": "https://api.github.com/users/pjfanning/orgs",
      "repos_url": "https://api.github.com/users/pjfanning/repos",
      "events_url": "https://api.github.com/users/pjfanning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pjfanning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-05T17:33:13Z",
    "updated_at": "2023-05-05T18:17:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm a Jackson committer and 2.15.0 has some big changes in it. A number of changes have already been made based on some bugs and some tweaking of the changes (for a forthcoming v2.15.1 release). I would discourage anyone from making releases that are based on Jackson 2.15.0.",
    "reactions": {
      "url": "https://api.github.com/repos/apache/spark/issues/comments/1536568838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
