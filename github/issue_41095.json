{
  "url": "https://api.github.com/repos/apache/spark/issues/41095",
  "repository_url": "https://api.github.com/repos/apache/spark",
  "labels_url": "https://api.github.com/repos/apache/spark/issues/41095/labels{/name}",
  "comments_url": "https://api.github.com/repos/apache/spark/issues/41095/comments",
  "events_url": "https://api.github.com/repos/apache/spark/issues/41095/events",
  "html_url": "https://github.com/apache/spark/pull/41095",
  "id": 1700965802,
  "node_id": "PR_kwDOAQXtWs5QCcxK",
  "number": 41095,
  "title": "[SPARK-43414][TESTS] Fix flakiness in Kafka RDD suites due to port binding configuration issue",
  "user": {
    "login": "JoshRosen",
    "id": 50748,
    "node_id": "MDQ6VXNlcjUwNzQ4",
    "avatar_url": "https://avatars.githubusercontent.com/u/50748?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JoshRosen",
    "html_url": "https://github.com/JoshRosen",
    "followers_url": "https://api.github.com/users/JoshRosen/followers",
    "following_url": "https://api.github.com/users/JoshRosen/following{/other_user}",
    "gists_url": "https://api.github.com/users/JoshRosen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JoshRosen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JoshRosen/subscriptions",
    "organizations_url": "https://api.github.com/users/JoshRosen/orgs",
    "repos_url": "https://api.github.com/users/JoshRosen/repos",
    "events_url": "https://api.github.com/users/JoshRosen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JoshRosen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-05-08T21:25:34Z",
  "updated_at": "2023-05-08T23:06:22Z",
  "closed_at": "2023-05-08T23:06:22Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/apache/spark/pulls/41095",
    "html_url": "https://github.com/apache/spark/pull/41095",
    "diff_url": "https://github.com/apache/spark/pull/41095.diff",
    "patch_url": "https://github.com/apache/spark/pull/41095.patch",
    "merged_at": null
  },
  "body": "### What changes were proposed in this pull request?\r\n\r\nThis PR addresses a test flakiness issue in Kafka connector RDD suites\r\n\r\nhttps://github.com/apache/spark/pull/34089#pullrequestreview-872739182 (Spark 3.4.0) upgraded Spark to Kafka 3.1.0, which requires a different configuration key for configuring the broker listening port. That PR updated the `KafkaTestUtils.scala` used in SQL tests, but there's a near-duplicate of that code in a different `KafkaTestUtils.scala` used by RDD API suites which wasn't updated. As a result, the RDD suites began using Kafka's default port 9092 and this results in flakiness as multiple concurrent suites hit port conflicts when trying to bind to that default port.\r\n\r\nThis PR fixes that by simply copying the updated configuration from the SQL copy of `KafkaTestUtils.scala`. \r\n\r\n\r\n### Why are the changes needed?\r\n\r\nFix test flakiness due to port conflicts.\r\n\r\n\r\n### Does this PR introduce _any_ user-facing change?\r\n\r\nNo\r\n\r\n\r\n### How was this patch tested?\r\n\r\nRan 20 concurrent copies of `org.apache.spark.streaming.kafka010.JavaKafkaRDDSuite` in my CI environment and confirmed that this PR's changes resolve the test flakiness.",
  "closed_by": {
    "login": "dongjoon-hyun",
    "id": 9700541,
    "node_id": "MDQ6VXNlcjk3MDA1NDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9700541?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dongjoon-hyun",
    "html_url": "https://github.com/dongjoon-hyun",
    "followers_url": "https://api.github.com/users/dongjoon-hyun/followers",
    "following_url": "https://api.github.com/users/dongjoon-hyun/following{/other_user}",
    "gists_url": "https://api.github.com/users/dongjoon-hyun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dongjoon-hyun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dongjoon-hyun/subscriptions",
    "organizations_url": "https://api.github.com/users/dongjoon-hyun/orgs",
    "repos_url": "https://api.github.com/users/dongjoon-hyun/repos",
    "events_url": "https://api.github.com/users/dongjoon-hyun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dongjoon-hyun/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/apache/spark/issues/41095/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/apache/spark/issues/41095/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
