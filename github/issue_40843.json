{
  "url": "https://api.github.com/repos/apache/spark/issues/40843",
  "repository_url": "https://api.github.com/repos/apache/spark",
  "labels_url": "https://api.github.com/repos/apache/spark/issues/40843/labels{/name}",
  "comments_url": "https://api.github.com/repos/apache/spark/issues/40843/comments",
  "events_url": "https://api.github.com/repos/apache/spark/issues/40843/events",
  "html_url": "https://github.com/apache/spark/pull/40843",
  "id": 1674229388,
  "node_id": "PR_kwDOAQXtWs5Oow7u",
  "number": 40843,
  "title": "[SPARK-43179][SHUFFLE] Allowing apps to control whether their metadata gets saved in the db by the External Shuffle Service",
  "user": {
    "login": "otterc",
    "id": 4690923,
    "node_id": "MDQ6VXNlcjQ2OTA5MjM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4690923?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/otterc",
    "html_url": "https://github.com/otterc",
    "followers_url": "https://api.github.com/users/otterc/followers",
    "following_url": "https://api.github.com/users/otterc/following{/other_user}",
    "gists_url": "https://api.github.com/users/otterc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/otterc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/otterc/subscriptions",
    "organizations_url": "https://api.github.com/users/otterc/orgs",
    "repos_url": "https://api.github.com/users/otterc/repos",
    "events_url": "https://api.github.com/users/otterc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/otterc/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1427970157,
      "node_id": "MDU6TGFiZWwxNDI3OTcwMTU3",
      "url": "https://api.github.com/repos/apache/spark/labels/YARN",
      "name": "YARN",
      "color": "ededed",
      "default": false,
      "description": null
    },
    {
      "id": 1981471081,
      "node_id": "MDU6TGFiZWwxOTgxNDcxMDgx",
      "url": "https://api.github.com/repos/apache/spark/labels/DOCS",
      "name": "DOCS",
      "color": "ededed",
      "default": false,
      "description": null
    },
    {
      "id": 1981527456,
      "node_id": "MDU6TGFiZWwxOTgxNTI3NDU2",
      "url": "https://api.github.com/repos/apache/spark/labels/CORE",
      "name": "CORE",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2023-04-19T06:05:29Z",
  "updated_at": "2023-04-21T18:30:25Z",
  "closed_at": "2023-04-21T17:21:44Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/apache/spark/pulls/40843",
    "html_url": "https://github.com/apache/spark/pull/40843",
    "diff_url": "https://github.com/apache/spark/pull/40843.diff",
    "patch_url": "https://github.com/apache/spark/pull/40843.patch",
    "merged_at": null
  },
  "body": "### What changes were proposed in this pull request?\r\nThis change allows applications to control whether their metadata gets saved in the db. For applications with higher security requirements, storing application secret in the db without any encryption is a potential security risk. While filesystem ACLs can help protect the access to the db, this level of security is not sufficient for some use cases. Such applications can chose to not save their metadata in the db. As a result, these applications may experience more failures in the event of a node restart, but we believe this trade-off is acceptable given the increased security risk.\r\n\r\n### Why are the changes needed?\r\nThese modifications are necessary to reduce the likelihood of security threats for applications with elevated security requirements.\r\n\r\n### Does this PR introduce _any_ user-facing change?\r\nNo. Added a configuration `spark.shuffle.server.recovery.disabled` which by default is `false`. When set to `true`, the metadata of the application will not saved in the db.\r\n\r\n### How was this patch tested?\r\nAdded UTs and also verified with test applications in our test environment.",
  "closed_by": {
    "login": "mridulm",
    "id": 1591700,
    "node_id": "MDQ6VXNlcjE1OTE3MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1591700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mridulm",
    "html_url": "https://github.com/mridulm",
    "followers_url": "https://api.github.com/users/mridulm/followers",
    "following_url": "https://api.github.com/users/mridulm/following{/other_user}",
    "gists_url": "https://api.github.com/users/mridulm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mridulm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mridulm/subscriptions",
    "organizations_url": "https://api.github.com/users/mridulm/orgs",
    "repos_url": "https://api.github.com/users/mridulm/repos",
    "events_url": "https://api.github.com/users/mridulm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mridulm/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/apache/spark/issues/40843/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/apache/spark/issues/40843/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
